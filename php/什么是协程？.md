## 什么是协程？

> 我第一次接触协程的时候是在鸟哥的博客上面，通过他的一篇文章发现 php 还有协程这个黑科技 [原文地址](http://www.laruence.com/2015/05/28/3038.html")
但是这篇文章让我看得一脸懵逼，照着文章上面也没有实现。一直也觉得php中自带的 yield 比较鸡肋。
但是 swoole 的协程出现，才让我认识到原来协程是这么强大的。

## 运行模式

### PHPFPM 同步阻塞模式
> web_server 接收到请求了，转发给 PHPFPM 处理，PHPFPM master 进程接受到请求转发给 具体的 Worker 进程执行，然后你在 你代码中写了一句sql   `UPDATE user SET username = 'test' `，当代码执行到这一行 sql 的时候，Worker 进程在这里等待你 update 返回的结果，如果等待了很久，到达了你设置的超时时间，mysql 会抛出一个超时错误。这就是 传统的 `同步阻塞模式`。
这种模式下，如果你的程序有 50个 Worker 进程，一秒钟处理一个请求，那么你的程序大概 `QPS = 50/s`,意味着 每秒处理能力只有 50 个请求。这样在大并发的情况下，服务器直接宕机。当然土豪除外（没有什么是加服务器解决不了的，如果有，那就多加几台！😀😁💪）

### 异步非阻塞
> 异步需要写回调函数，当程序执行到需要 io 的地方，当前进程不会等带返回结果，直接执行另外的任务。等 io 完成后会调用 回调函数。这样的方式并发能力强。但是系统中随处可见的回调函数会让你的脑袋宕机。🙈🙉🙊🐵

### 协程
> swoole 官方解释的协程：`协程可以理解为纯用户态的线程，其通过协作而不是抢占来进行切换。相对于进程或者线程，协程所有的操作都可以在用户态完成，创建和切换的消耗更低。Swoole可以为每一个请求创建对应的协程，根据IO的状态来合理的调度协程`
<br/>
我的理解：`先学习学习`

### 基础普及
>  进程 ：
计算机的核心是 cpu,cpu有非常强的计算能力。操作系统是计算机的管理者，他负责任务调度，资源分配和管理。应用程序是运行在操作系统之上。进程是某个程序关于某种数据集合的一次运行活动。是操作系统对资源分配管理调度的一个独立单位，他用自自己独立的空间，进程是一个应用程序的载体，所有程序想要在现代操作系统上运行，必须要有进程。
* 动态性 （进程是程序的一次执行过程，是临时的，有生命周期，动态产生，动态消亡）
* 并发性 （进程可以同其他进程并发执行）
* 独立性 （进程是操作系统进行资源分配和调度的一个独立单位）
* 结构性 （进程是由程序，数据，进程块三部分组成）

> 线程 一个进程可以有多个线程，所有线程共享当前进程的内存空间。

> 区别 线程是程序执行的最小单位，进程是操作系统分配资源最小的单位。一个进程会由多个线程组成，进程之间相互独立，但是同一进程中的线程共享内存空间。线程的上下文切换比进程快。
