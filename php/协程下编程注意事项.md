### hyperf 作者箴言

#### 协程模式下注意的事项

* 协程编程模式下不要使用类属性存请求相关的数据，类参数最好通过传递。
* 协程编程要用协程上下文去储存数据
* 如果类属性跟协程或者请求有关系，那么就有问题。没关系就没问题。比如存一个 密钥，这是唯一的，和请求没关系，所以这是协程安全。可以使用类属性
* 纠正一下用词，Redis、Memcache 不是缓存，缓存也不是 Redis、Memcache，应该是内存数据库

#### 作者问答
* A：其实我觉得单例 对 new 的性能一般没什么影响，除非你的类超级复杂
* 答：突然想起你这句话，还有一点重要的影响，new 更消耗内存，在协程编程下，通常是高并发系统，内存的控制尤其重要
* A：hyperf 为什么要把 数据存储在 协程上下文？
* 答：储存上下文是为了避免协程结束时忘记释放导致内存泄漏
> A:总结一下：传统模式=>一个进程=>类调用链，一条链中每个类有自己的堆栈
    hyperf 模式 ：进程=>N个协程，每个协程有自己的上下文，每个协程通过数据传参去调用，单例类调用链

### 群友问答
* 问:协程结束后 内存会自动回收吧?
* 答:是的

#### 思想
* 框架的第一任务是引导用户按框架的理念去写代码，而不是防止人犯傻
* 做一个框架是为了输出一个编程理念，否则这个框架将毫无意义

